{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,QAASC,SAASC,cAAc,eAChCC,MAAOF,SAASC,cAAc,gBAC9BE,aAAcH,SAASC,cAAc,sBACrCG,WAAYJ,SAASC,cAAc,qBAI/BI,EAAST,EAAAU,QACZC,KACC,SAACC,EAAOC,G,MACN,sEAIaC,OAHsBF,EAAMG,SAAS,6EAI7BD,OADRF,EAAMI,QAAQ,gCAEPF,OADCF,EAAMG,SAAS,+BAEvBD,OADOD,EAAM,wBACKC,OAAlBF,EAAMK,YAAY,6C,IAKlCC,KAAK,IACRhB,EAAKC,QAAQgB,mBAAmB,aAAcV,GAGrB,IAcnBW,EAAa,SAAAC,GAEiB,mBAAhCA,EAAMC,OAAOC,QAAQC,QACM,sBAA3BH,EAAMC,OAAOG,WACE,WAAfJ,EAAMK,OAENxB,EAAKM,WAAWmB,IAAM,GACtBzB,EAAKM,WAAWoB,IAAM,GACtB1B,EAAKM,WAAWqB,UAAUC,IAAI,aAC9B5B,EAAKM,WAAWe,QAAQV,MAAQ,GAChCX,EAAKI,MAAMuB,UAAUE,OAAO,WAC5BC,OAAOC,oBAAoB,UAAWb,GACtCY,OAAOC,oBAAoB,UAAWC,G,EAMpCA,EAAS,SAAAb,GACb,IAAMc,EAAe/B,SAASC,cAAc,4BACtC+B,EAAYhC,SAASiC,iBAAiB,UACxCC,EAAaC,OAAOrC,EAAKM,WAAWe,QAAQV,OAE7B,cAAfQ,EAAMK,QACRY,GAAc,GACG,IACfA,EAAaF,EAAUI,OAAS,GAElCC,EAAcL,EAAWD,EAAcG,IAGtB,eAAfjB,EAAMK,QACRY,GAAc,IACIF,EAAUI,SAC1BF,EAAa,GAEfG,EAAcL,EAAWD,EAAcG,G,EAMrCG,EAAgB,SAACL,EAAWD,EAAcG,GAC9CH,EAAaR,IAAMS,EAAUE,GAAYf,QAAQmB,OACjDP,EAAaZ,QAAQV,MAAQuB,EAAUE,GAAYf,QAAQV,MAC3DsB,EAAaP,IAAMQ,EAAUE,GAAYV,G,EAI3C1B,EAAKC,QAAQwC,iBAAiB,SA/DZ,SAAAtB,GAChBA,EAAMuB,iBACNZ,OAAOW,iBAAiB,UAAWT,GACnCF,OAAOW,iBAAiB,UAAWvB,GACL,QAA1BC,EAAMC,OAAOuB,WACf3C,EAAKI,MAAMuB,UAAUC,IAAI,WACzB5B,EAAKM,WAAWmB,IAAMN,EAAMC,OAAOC,QAAQmB,OAC3CxC,EAAKM,WAAWoB,IAAMP,EAAMC,OAAOM,IACnC1B,EAAKM,WAAWe,QAAQV,MAAQQ,EAAMC,OAAOC,QAAQV,M,IAwDzDX,EAAKI,MAAMqC,iBAAiB,QAASvB,GACrClB,EAAKM,WAAWmC,iBAAiB,UAAWvB,E","sources":["src/js/app.js"],"sourcesContent":["import galleryItems from './gallery-items';\n\nconst root = {\n  gallery: document.querySelector('.js-gallery'),\n  modal: document.querySelector('.js-lightbox'),\n  modalOverlay: document.querySelector('.lightbox__overlay'),\n  modalImage: document.querySelector('.lightbox__image'),\n};\n\n//Создаем галлерею по шаблону и добавляем блок галереи в HTML\nconst images = galleryItems\n  .map(\n    (image, index) =>\n      `<li class=\"gallery__item\">\n        <a class=\"gallery__link\" href=\"${image.original}\">\n          <img\n            class=\"gallery__image\"\n            src=\"${image.preview}\"\n            data-source=\"${image.original}\"\n            data-index=\"${index}\"\n            alt=\"${image.description}\"\n          />\n        </a>\n      </li>`\n  )\n  .join('');\nroot.gallery.insertAdjacentHTML('afterbegin', images);\n\n//При открытии модального окна\nconst openModal = event => {\n  event.preventDefault();\n  window.addEventListener('keydown', slider);\n  window.addEventListener('keydown', closeModal);\n  if (event.target.nodeName === 'IMG') {\n    root.modal.classList.add('is-open');\n    root.modalImage.src = event.target.dataset.source;\n    root.modalImage.alt = event.target.alt;\n    root.modalImage.dataset.index = event.target.dataset.index;\n  }\n  return;\n};\n\n//При закрытии модального окна\nconst closeModal = event => {\n  if (\n    event.target.dataset.action === 'close-lightbox' ||\n    event.target.className === 'lightbox__overlay' ||\n    event.code === 'Escape'\n  ) {\n    root.modalImage.src = '';\n    root.modalImage.alt = '';\n    root.modalImage.classList.add('activeImg');\n    root.modalImage.dataset.index = '';\n    root.modal.classList.remove('is-open');\n    window.removeEventListener('keydown', closeModal);\n    window.removeEventListener('keydown', slider);\n  }\n  return;\n};\n\n//Прокрутка галлерии стрелками\nconst slider = event => {\n  const currentImage = document.querySelector('.lightbox__content > img');\n  const allImages = document.querySelectorAll('ul img');\n  let indexImage = Number(root.modalImage.dataset.index);\n\n  if (event.code === 'ArrowLeft') {\n    indexImage -= 1;\n    if (indexImage < 0) {\n      indexImage = allImages.length - 1;\n    }\n    setSliderData(allImages, currentImage, indexImage);\n  }\n\n  if (event.code === 'ArrowRight') {\n    indexImage += 1;\n    if (indexImage >= allImages.length) {\n      indexImage = 0;\n    }\n    setSliderData(allImages, currentImage, indexImage);\n  }\n  return;\n};\n\n//Добавление атрибутов изображениям в слайдере\nconst setSliderData = (allImages, currentImage, indexImage) => {\n  currentImage.src = allImages[indexImage].dataset.source;\n  currentImage.dataset.index = allImages[indexImage].dataset.index;\n  currentImage.alt = allImages[indexImage].alt;\n};\n\n//Слушатели событий при открытом и закрытом модальном окне\nroot.gallery.addEventListener('click', openModal);\nroot.modal.addEventListener('click', closeModal);\nroot.modalImage.addEventListener('keydown', closeModal);\n"],"names":["$dwxJN","parcelRequire","$7e6258f3559d0f34$var$root","gallery","document","querySelector","modal","modalOverlay","modalImage","$7e6258f3559d0f34$var$images","default","map","image","index","concat","original","preview","description","join","insertAdjacentHTML","$7e6258f3559d0f34$var$closeModal","event","target","dataset","action","className","code","src","alt","classList","add","remove","window","removeEventListener","$7e6258f3559d0f34$var$slider","currentImage","allImages","querySelectorAll","indexImage","Number","length","$7e6258f3559d0f34$var$setSliderData","source","addEventListener","preventDefault","nodeName"],"version":3,"file":"index.0f5f599a.js.map"}